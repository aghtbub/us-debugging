# 离线确定性密码生成器（单文件）

一个单文件的离线密码 / 随机字符串生成器（index.html）。基于浏览器 Web Crypto 实现：支持确定性生成、可选本地加密历史、哈希链溯源、导出/导入加密备份。界面配色使用克莱因蓝（主色）/ 黑 / 白，删除操作使用红色。

## 主要特性
- 单文件（index.html），无需服务器，直接在浏览器打开（file://）即可使用。  
- 使用安全的加密原语（PBKDF2、AES-GCM、SHA-256）进行派生与存储。  
- 确定性生成：相同的主密码 + 相同的生成参数（关键词、长度、字符集等）会产生相同的结果。  
- 本地历史加密存储（localStorage），查看历史需解锁主密码。  
- 历史记录支持哈希链（prevHash/recordHash）以便溯源完整性校验。  
- 支持导出加密备份（JSON）和导入备份。  
- UI 已美化，主色为克莱因蓝，文字为白色，删除按钮为红色。

## 快速开始（本地运行）
1. 下载或复制仓库中的 `index.html` 到本地。  
2. 在 Windows 上：右键 `index.html` → 选择“打开方式” → 选择浏览器（Chrome / Edge / Firefox），或直接双击。  
3. 在页面操作流程：
   - 在“主密码”输入框输入主密码（用于派生与加密历史）。  
   - 输入站点/关键词、长度、选择字符集（数字/大小写字母/特殊字符）、可选备注与版本号。  
   - 点击“生成并保存历史”或“仅生成（不保存）”。  
   - 若要查看历史：点击“解锁历史”，输入主密码以解密并显示本地历史。  
   - 可通过“导出加密历史”下载备份 JSON，通过“导入加密历史”恢复。

## 为什么是“确定性”生成器
该工具基于主密码 + 关键词（+ 其它参数）派生出确定性的输出，适合在不保存明文密码的前提下，通过相同规则在不同设备或不同时间复现密码。注意：主密码泄露会导致所有派生密码被恢复。

## 导出 / 导入备份
- 导出：点击“导出加密历史（下载）”，会下载一个包含加密数据与元信息的 JSON 文件。  
- 导入：选择之前导出的 JSON 文件并导入，导入后仍需用主密码解锁以查看明文历史。  
- 切勿在未加密或公开的位置保存明文历史或包含主密码的备份文件。

## 在 GitHub 上发布为 Pages（可选）
将 `index.html` 放在仓库根目录并推送到 GitHub。  
在仓库 Settings -> Pages：
- Branch 选择 `main`（或 `master`），Folder 选择 `/ (root)`，保存。  
几分钟后可通过：`https://<你的用户名>.github.io/<仓库名>/` 访问（注意：Pages 托管为公开，请勿上传敏感明文文件）。

## Git 使用示例（命令行）
```bash
# 在项目文件夹执行：
git init
git add index.html README.md
git commit -m "Add single-file pwgen"
git branch -M main
git remote add origin https://github.com/USERNAME/REPO.git
git push -u origin main
```
请将 `USERNAME` 和 `REPO` 替换为你的 GitHub 用户名与仓库名。

## 安全注意事项（务必阅读）
- 主密码非常关键：丢失主密码将导致无法解密历史或复现密码；泄露主密码将导致所有派生密码被恢复。  
- 若要保存历史，历史以 AES-GCM 加密存储在 localStorage 中；虽然是本地加密，但仍受设备安全影响。  
- 切勿把包含主密码或明文密码的文件、截图或导出备份上传到公开仓库或不受信任的云服务。  
- 对于高价值账户（银行、重要邮箱），建议使用成熟的密码管理器并启用两步验证（2FA）。

## 常见问题与排错
- 页面空白或功能异常：打开浏览器开发者工具（F12）查看 Console 错误并将错误信息提供以便排查。  
- 文件被保存为 `index.html.txt`：请在保存时选择“所有文件 (*.*)”并手动输入 `.html` 后缀，或在资源管理器中重命名并显示文件扩展名。  
- 导入备份失败：确认 JSON 未被修改，且导出/导入时使用相同的格式和主密码。

## 文件列表
- index.html — 单文件应用（主程序）  
- README.md — 本说明文档

## 贡献与二次开发
欢迎提交 issue 或 PR。如果你想增加功能（例如按站点筛选历史、CSV 导出、本地化、多设备同步等），请在仓库中打开 Issue 描述需求，或直接提交 PR。

## 许可证
本项目采用 MIT 许可证（LICENSE）。